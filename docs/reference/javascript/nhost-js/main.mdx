Main entry point for the Nhost JavaScript SDK.

This package provides a unified client for interacting with Nhost services:

- Authentication
- Storage
- GraphQL
- Functions

## Example

You can import and use this package with:

```ts
import { createClient } from "@nhost/nhost-js-sdk";
```

and use it like:

```ts
const nhost = createClient({
  subdomain: subdomain,
  region: region,
});

// Sign in with email/password
// This will create a session and persist it in the storage
// Subsequent calls will use the session from the storage
// If the session is about to expire, it will be refreshed
// automatically
await nhost.auth.signUpEmailPassword({
  email,
  password,
});

const uplFilesResp = await nhost.storage.uploadFiles({
  "file[]": [
    new File(["test1"], "file-1", { type: "text/plain" }),
    new File(["test2 is larger"], "file-2", { type: "text/plain" }),
  ],
});
console.log(JSON.stringify(uplFilesResp, null, 2));
// {
//   "data": {
//     "processedFiles": [
//       {
//         "id": "c0e83185-0ce5-435c-bd46-9841adc30699",
//         "name": "file-1",
//         "size": 5,
//         "bucketId": "default",
//         "etag": "\"5a105e8b9d40e1329780d62ea2265d8a\"",
//         "createdAt": "2025-05-09T17:26:04.579839+00:00",
//         "updatedAt": "2025-05-09T17:26:04.589692+00:00",
//         "isUploaded": true,
//         "mimeType": "text/plain",
//         "uploadedByUserId": "",
//         "metadata": null
//       },
//       {
//         "id": "3f189004-21fd-42d0-be1d-1ead021ab167",
//         "name": "file-2",
//         "size": 15,
//         "bucketId": "default",
//         "etag": "\"302e888c5e289fe6b02115b748771ee9\"",
//         "createdAt": "2025-05-09T17:26:04.59245+00:00",
//         "updatedAt": "2025-05-09T17:26:04.596831+00:00",
//         "isUploaded": true,
//         "mimeType": "text/plain",
//         "uploadedByUserId": "",
//         "metadata": null
//       }
//     ]
//   },
//   "status": 201,
//   "headers": {
//     "content-length": "644",
//     "content-type": "application/json; charset=utf-8",
//     "date": "Fri, 09 May 2025 17:26:04 GMT"
//   }
// }

const graphResp = await nhost.graphql.query({
  query: `
   query {
     files {
       name
       size
       mimeType
     }
   }
 `,
});

console.log(JSON.stringify(graphResp, null, 2));
// {
//   "body": {
//     "data": {
//       "files": [
//         {
//           "name": "file-1",
//           "size": 5,
//           "mimeType": "text/plain"
//         },
//         {
//           "name": "file-2",
//           "size": 15,
//           "mimeType": "text/plain"
//         }
//       ]
//     }
//   },
//   "status": 200,
//   "headers": {}
// }
```

## Classes

### NhostClient

Main client class that provides access to all Nhost services

#### Constructors

##### Constructor

```ts
new NhostClient(
   auth: Client,
   storage: Client,
   graphql: Client,
   sessionStorage: SessionStorageInterface): NhostClient;
```

Create a new Nhost client. This constructor is reserved for advanced use cases.
For typical usage, use createClient instead.

###### Parameters

| Parameter        | Type                                                          | Description                                    |
| ---------------- | ------------------------------------------------------------- | ---------------------------------------------- |
| `auth`           | [`Client`](auth#client)                                   | Authentication client                          |
| `storage`        | [`Client`](storage#client)                                | Storage client                                 |
| `graphql`        | [`Client`](graphql#client)                                | GraphQL client                                 |
| `sessionStorage` | [`SessionStorageInterface`](auth#sessionstorageinterface) | Storage implementation for session persistence |

###### Returns

[`NhostClient`](#nhostclient)

#### Properties

| Property                                     | Type                                                          | Description                                                                                   |
| -------------------------------------------- | ------------------------------------------------------------- | --------------------------------------------------------------------------------------------- |
| <a id="auth"></a> `auth`                     | [`Client`](auth#client)                                   | Authentication client providing methods for user sign-in, sign-up, and session management     |
| <a id="graphql"></a> `graphql`               | [`Client`](graphql#client)                                | GraphQL client providing methods for executing GraphQL operations against your Hasura backend |
| <a id="sessionstorage"></a> `sessionStorage` | [`SessionStorageInterface`](auth#sessionstorageinterface) | Storage implementation used for persisting session information                                |
| <a id="storage"></a> `storage`               | [`Client`](storage#client)                                | Storage client providing methods for file operations (upload, download, delete)               |

#### Methods

##### clearSession()

```ts
clearSession(): Promise<void>;
```

Clear the session from storage

###### Returns

`Promise`&lt;`void`&gt;

##### getUserSession()

```ts
getUserSession(): null | Session;
```

Get the current session from storage

###### Returns

`null` \| [`Session`](auth#session)

The current session or null if no session exists

###### Example

```ts
const session = nhost.getUserSession();
if (session) {
  console.log("User is authenticated:", session.user.id);
} else {
  console.log("No active session");
}
```

##### refreshSession()

```ts
refreshSession(): Promise<null | Session>;
```

Refresh the session using the current refresh token
in the storage and update the storage with the new session

###### Returns

`Promise`&lt;`null` \| [`Session`](auth#session)&gt;

The new session or null if refresh fails

###### Throws

Error if no session exists in storage

## Interfaces

### NhostClientOptions

Configuration options for creating an Nhost client

#### Properties

| Property                              | Type                                                          | Description                                                            |
| ------------------------------------- | ------------------------------------------------------------- | ---------------------------------------------------------------------- |
| <a id="authurl"></a> `authUrl?`       | `string`                                                      | Complete base URL for the auth service (overrides subdomain/region)    |
| <a id="graphqlurl"></a> `graphqlUrl?` | `string`                                                      | Complete base URL for the GraphQL service (overrides subdomain/region) |
| <a id="region"></a> `region?`         | `string`                                                      | Nhost region (e.g., 'eu-central-1')                                    |
| <a id="storage-1"></a> `storage?`     | [`SessionStorageInterface`](auth#sessionstorageinterface) | Storage implementation to use for session persistence                  |
| <a id="storageurl"></a> `storageUrl?` | `string`                                                      | Complete base URL for the storage service (overrides subdomain/region) |
| <a id="subdomain"></a> `subdomain?`   | `string`                                                      | Nhost project subdomain (e.g., 'abcdefgh')                             |

## Functions

### createClient()

```ts
function createClient(options: NhostClientOptions): NhostClient;
```

Creates and configures a new Nhost client instance

This is the recommended way to initialize the Nhost SDK in your application.

#### Parameters

| Parameter | Type                                        | Description                          |
| --------- | ------------------------------------------- | ------------------------------------ |
| `options` | [`NhostClientOptions`](#nhostclientoptions) | Configuration options for the client |

#### Returns

[`NhostClient`](#nhostclient)

A configured Nhost client
