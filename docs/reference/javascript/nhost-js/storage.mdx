This is the main module to interact with Nhost's Storage service.
Typically you would use this modula via the main [Nhost client](main#createclient)
but you can also use it directly if you have a specific use case.

## Interfaces

### Client

Storage client interface providing methods for file operations

#### Properties

| Property                                                     | Type                                                                                                                                                                                               | Description                                                       |
| ------------------------------------------------------------ | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ----------------------------------------------------------------- |
| <a id="baseurl"></a> `baseURL`                               | `string`                                                                                                                                                                                           | Base URL for the storage service                                  |
| <a id="deletefile"></a> `deleteFile`                         | (`id`: `string`, `options?`: `RequestInit`) => `Promise`&lt;[`FetchResponse`](#fetchresponse)&lt;`void`&gt;&gt;                                                                                    | Delete a file                                                     |
| <a id="getfile"></a> `getFile`                               | (`id`: `string`, `params?`: [`GetFileParams`](#getfileparams), `options?`: `RequestInit`) => `Promise`&lt;[`FetchResponse`](#fetchresponse)&lt;`Blob`&gt;&gt;                                      | Download a file                                                   |
| <a id="getfilemetadataheaders"></a> `getFileMetadataHeaders` | (`id`: `string`, `params?`: [`GetFileMetadataHeadersParams`](#getfilemetadataheadersparams), `options?`: `RequestInit`) => `Promise`&lt;[`FetchResponse`](#fetchresponse)&lt;`void`&gt;&gt;        | Retrieve file metadata using HTTP HEAD method                     |
| <a id="getopenapispec"></a> `getOpenAPISpec`                 | (`options?`: `RequestInit`) => `Promise`&lt;[`FetchResponse`](#fetchresponse)&lt;[`GetOpenAPISpec200`](#getopenapispec200)&gt;&gt;                                                                 | Returns the OpenAPI schema definition for this API                |
| <a id="getversion"></a> `getVersion`                         | (`options?`: `RequestInit`) => `Promise`&lt;[`FetchResponse`](#fetchresponse)&lt;[`VersionInformation`](#versioninformation)&gt;&gt;                                                               | Retrieves build and version information about the storage service |
| <a id="pushchainfunction"></a> `pushChainFunction`           | (`chainFunction`: [`ChainFunction`](fetch#chainfunction)) => `void`                                                                                                                            | Add a middleware function to the request chain                    |
| <a id="replacefile"></a> `replaceFile`                       | (`id`: `string`, `replaceFileBody`: [`ReplaceFileBody`](#replacefilebody), `options?`: `RequestInit`) => `Promise`&lt;[`FetchResponse`](#fetchresponse)&lt;[`FileMetadata`](#filemetadata)&gt;&gt; | Replace an existing file                                          |
| <a id="uploadfiles"></a> `uploadFiles`                       | (`uploadFilesBody`: [`UploadFilesBody`](#uploadfilesbody), `options?`: `RequestInit`) => `Promise`&lt;[`FetchResponse`](#fetchresponse)&lt;[`UploadFiles201`](#uploadfiles201)&gt;&gt;             | Upload one or more files to storage                               |

---

### Error

Error information returned by the API.

#### Properties

| Property                      | Type                          | Description    |
| ----------------------------- | ----------------------------- | -------------- |
| <a id="error-1"></a> `error?` | [`ErrorError`](#errorerror-1) | Error details. |

---

### FileMetadata

Comprehensive metadata information about a file in storage.

#### Properties

| Property                                          | Type                                              | Description                                      |
| ------------------------------------------------- | ------------------------------------------------- | ------------------------------------------------ |
| <a id="bucketid"></a> `bucketId?`                 | `string`                                          | ID of the bucket containing the file.            |
| <a id="createdat"></a> `createdAt?`               | `string`                                          | Timestamp when the file was created.             |
| <a id="etag"></a> `etag?`                         | `string`                                          | Entity tag for cache validation.                 |
| <a id="id"></a> `id?`                             | `string`                                          | Unique identifier for the file.                  |
| <a id="isuploaded"></a> `isUploaded?`             | `boolean`                                         | Whether the file has been successfully uploaded. |
| <a id="metadata"></a> `metadata?`                 | [`FileMetadataMetadata`](#filemetadatametadata-1) | Custom metadata associated with the file.        |
| <a id="mimetype"></a> `mimeType?`                 | `string`                                          | MIME type of the file.                           |
| <a id="name"></a> `name?`                         | `string`                                          | Name of the file including extension.            |
| <a id="size"></a> `size?`                         | `number`                                          | Size of the file in bytes.                       |
| <a id="updatedat"></a> `updatedAt?`               | `string`                                          | Timestamp when the file was last updated.        |
| <a id="uploadedbyuserid"></a> `uploadedByUserId?` | `string`                                          | ID of the user who uploaded the file.            |

---

### FileSummary

Basic information about a file in storage.

#### Properties

| Property                                | Type      | Description                                      |
| --------------------------------------- | --------- | ------------------------------------------------ |
| <a id="bucketid-1"></a> `bucketId?`     | `string`  | ID of the bucket containing the file.            |
| <a id="id-1"></a> `id?`                 | `string`  | Unique identifier for the file.                  |
| <a id="isuploaded-1"></a> `isUploaded?` | `boolean` | Whether the file has been successfully uploaded. |
| <a id="name-1"></a> `name?`             | `string`  | Name of the file including extension.            |

---

### PresignedURLResponse

Contains a presigned URL for direct file operations.

#### Properties

| Property                              | Type     | Description                                |
| ------------------------------------- | -------- | ------------------------------------------ |
| <a id="expiration"></a> `expiration?` | `number` | The time in seconds until the URL expires. |
| <a id="url"></a> `url?`               | `string` | The presigned URL for file operations.     |

---

### UpdateFileMetadata

Metadata that can be updated for an existing file.

#### Properties

| Property                            | Type                                                          | Description                                         |
| ----------------------------------- | ------------------------------------------------------------- | --------------------------------------------------- |
| <a id="metadata-2"></a> `metadata?` | [`UpdateFileMetadataMetadata`](#updatefilemetadatametadata-1) | Updated custom metadata to associate with the file. |
| <a id="name-2"></a> `name?`         | `string`                                                      | New name to assign to the file.                     |

---

### UploadFileMetadata

Metadata provided when uploading a new file.

#### Properties

| Property                            | Type                                                          | Description                                                                      |
| ----------------------------------- | ------------------------------------------------------------- | -------------------------------------------------------------------------------- |
| <a id="id-2"></a> `id?`             | `string`                                                      | Optional custom ID for the file. If not provided, a UUID will be generated.      |
| <a id="metadata-3"></a> `metadata?` | [`UploadFileMetadataMetadata`](#uploadfilemetadatametadata-1) | Custom metadata to associate with the file.                                      |
| <a id="name-3"></a> `name?`         | `string`                                                      | Name to assign to the file. If not provided, the original filename will be used. |

---

### VersionInformation

Contains version information about the storage service.

#### Properties

| Property                                  | Type     | Description                                      |
| ----------------------------------------- | -------- | ------------------------------------------------ |
| <a id="buildversion"></a> `buildVersion?` | `string` | The version number of the storage service build. |

## Type Aliases

### ErrorError

```ts
type ErrorError = object;
```

Error details.

#### Properties

| Property                       | Type     | Description                   |
| ------------------------------ | -------- | ----------------------------- |
| <a id="message"></a> `message` | `string` | Human-readable error message. |

---

### FetchResponse&lt;T&gt;

```ts
type FetchResponse<T> = object;
```

#### Type Parameters

| Type Parameter |
| -------------- |
| `T`            |

#### Properties

| Property                       | Type      |
| ------------------------------ | --------- |
| <a id="body"></a> `body`       | `T`       |
| <a id="headers"></a> `headers` | `Headers` |
| <a id="status"></a> `status`   | `number`  |

---

### FileMetadataMetadata

```ts
type FileMetadataMetadata = object;
```

Custom metadata associated with the file.

#### Index Signature

```ts
[key: string]: unknown
```

---

### GetFileF

```ts
type GetFileF = "auto" | "same" | "jpeg" | "webp" | "png" | "avif";
```

---

### GetFileMetadataHeadersF

```ts
type GetFileMetadataHeadersF =
  | "auto"
  | "same"
  | "jpeg"
  | "webp"
  | "png"
  | "avif";
```

---

### GetFileMetadataHeadersParams

```ts
type GetFileMetadataHeadersParams = object;
```

#### Properties

| Property            | Type                                                  | Description                                                                                   |
| ------------------- | ----------------------------------------------------- | --------------------------------------------------------------------------------------------- |
| <a id="b"></a> `b?` | `number`                                              | Blur the image using this sigma value. Only applies to image files                            |
| <a id="f"></a> `f?` | [`GetFileMetadataHeadersF`](#getfilemetadataheadersf) | Output format for image files. Use 'auto' for content negotiation based on Accept header      |
| <a id="h"></a> `h?` | `number`                                              | Maximum height to resize image to while maintaining aspect ratio. Only applies to image files |
| <a id="q"></a> `q?` | `number`                                              | Image quality (1-100). Only applies to JPEG, WebP and PNG files                               |
| <a id="w"></a> `w?` | `number`                                              | Maximum width to resize image to while maintaining aspect ratio. Only applies to image files  |

---

### GetFileParams

```ts
type GetFileParams = object;
```

#### Properties

| Property              | Type                    | Description                                                                                   |
| --------------------- | ----------------------- | --------------------------------------------------------------------------------------------- |
| <a id="b-1"></a> `b?` | `number`                | Blur the image using this sigma value. Only applies to image files                            |
| <a id="f-1"></a> `f?` | [`GetFileF`](#getfilef) | Output format for image files. Use 'auto' for content negotiation based on Accept header      |
| <a id="h-1"></a> `h?` | `number`                | Maximum height to resize image to while maintaining aspect ratio. Only applies to image files |
| <a id="q-1"></a> `q?` | `number`                | Image quality (1-100). Only applies to JPEG, WebP and PNG files                               |
| <a id="w-1"></a> `w?` | `number`                | Maximum width to resize image to while maintaining aspect ratio. Only applies to image files  |

---

### GetOpenAPISpec200

```ts
type GetOpenAPISpec200 = object;
```

#### Index Signature

```ts
[key: string]: unknown
```

---

### ReplaceFileBody

```ts
type ReplaceFileBody = object;
```

#### Properties

| Property                            | Type                                        | Description                                   |
| ----------------------------------- | ------------------------------------------- | --------------------------------------------- |
| <a id="file"></a> `file?`           | `Blob`                                      | New file content to replace the existing file |
| <a id="metadata-1"></a> `metadata?` | [`UpdateFileMetadata`](#updatefilemetadata) | Optional metadata to update for the file      |

---

### UpdateFileMetadataMetadata

```ts
type UpdateFileMetadataMetadata = object;
```

Updated custom metadata to associate with the file.

#### Index Signature

```ts
[key: string]: unknown
```

---

### UploadFileMetadataMetadata

```ts
type UploadFileMetadataMetadata = object;
```

Custom metadata to associate with the file.

#### Index Signature

```ts
[key: string]: unknown
```

---

### UploadFiles201

```ts
type UploadFiles201 = object;
```

#### Properties

| Property                                      | Type                              | Description                                               |
| --------------------------------------------- | --------------------------------- | --------------------------------------------------------- |
| <a id="processedfiles"></a> `processedFiles?` | [`FileMetadata`](#filemetadata)[] | List of successfully processed files with their metadata. |

---

### UploadFilesBody

```ts
type UploadFilesBody = object;
```

#### Properties

| Property                              | Type                                          | Description                                                                                |
| ------------------------------------- | --------------------------------------------- | ------------------------------------------------------------------------------------------ |
| <a id="bucket-id"></a> `bucket-id?`   | `string`                                      | Target bucket identifier where files will be stored.                                       |
| <a id="file-1"></a> `file[]?`         | `Blob`[]                                      | Array of files to upload.                                                                  |
| <a id="metadata-4"></a> `metadata[]?` | [`UploadFileMetadata`](#uploadfilemetadata)[] | Optional custom metadata for each uploaded file. Must match the order of the file[] array. |

## Functions

### createAPIClient()

```ts
function createAPIClient(
  baseURL: string,
  chainFunctions: ChainFunction[],
): Client;
```

#### Parameters

| Parameter        | Type                                         | Default value |
| ---------------- | -------------------------------------------- | ------------- |
| `baseURL`        | `string`                                     | `undefined`   |
| `chainFunctions` | [`ChainFunction`](fetch#chainfunction)[] | `[]`          |

#### Returns

[`Client`](#client)
